import e from"tty";import t from"util";import r from"os";class n{_options;constructor(e){this._options=e,this.preflightValidation()}}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a,s,c,u,l,p={exports:{}},f={exports:{}};function y(){if(s)return a;s=1;var e=1e3,t=60*e,r=60*t,n=24*r,o=7*n,i=365.25*n;function c(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}return a=function(a,s){s=s||{};var u=typeof a;if("string"===u&&a.length>0)return function(a){if((a=String(a)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(!s)return;var c=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*i;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*n;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(a);if("number"===u&&isFinite(a))return s.long?function(o){var i=Math.abs(o);if(i>=n)return c(o,i,n,"day");if(i>=r)return c(o,i,r,"hour");if(i>=t)return c(o,i,t,"minute");if(i>=e)return c(o,i,e,"second");return o+" ms"}(a):function(o){var i=Math.abs(o);if(i>=n)return Math.round(o/n)+"d";if(i>=r)return Math.round(o/r)+"h";if(i>=t)return Math.round(o/t)+"m";if(i>=e)return Math.round(o/e)+"s";return o+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))},a}function d(){if(u)return c;return u=1,c=function(e){function t(e){let n,o,i,a=null;function s(...e){if(!s.enabled)return;const r=s,o=Number(new Date),i=o-(n||o);r.diff=i,r.prev=n,r.curr=o,n=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";a++;const i=t.formatters[o];if("function"==typeof i){const t=e[a];n=i.call(r,t),e.splice(a,1),a--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e,t){let r=0,n=0,o=-1,i=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(o=n,i=r,n++):(r++,n++);else{if(-1===o)return!1;n=o+1,i++,r=i}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const r of t.skips)if(n(e,r))return!1;for(const r of t.names)if(n(e,r))return!0;return!1},t.humanize=y(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t},c}var h,g,m,b,v,w,_={exports:{}};function S(){return g?h:(g=1,h=(e,t=process.argv)=>{const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),o=t.indexOf("--");return-1!==n&&(-1===o||n<o)})}function O(){return v||(v=1,function(n,o){const i=e,a=t;o.init=function(e){e.inspectOpts={};const t=Object.keys(o.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=o.inspectOpts[t[r]]},o.log=function(...e){return process.stderr.write(a.formatWithOptions(o.inspectOpts,...e)+"\n")},o.formatArgs=function(e){const{namespace:t,useColors:r}=this;if(r){const r=this.color,o="[3"+(r<8?r:"8;5;"+r),i=`  ${o};1m${t} [0m`;e[0]=i+e[0].split("\n").join("\n"+i),e.push(o+"m+"+n.exports.humanize(this.diff)+"[0m")}else e[0]=function(){if(o.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+t+" "+e[0]},o.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},o.load=function(){return process.env.DEBUG},o.useColors=function(){return"colors"in o.inspectOpts?Boolean(o.inspectOpts.colors):i.isatty(process.stderr.fd)},o.destroy=a.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),o.colors=[6,2,3,4,5,1];try{const t=function(){if(b)return m;b=1;const t=r,n=e,o=S(),{env:i}=process;let a;function s(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function c(e,r){if(0===a)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!r&&void 0===a)return 0;const n=a||0;if("dumb"===i.TERM)return n;if("win32"===process.platform){const e=t.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in i))||"codeship"===i.CI_NAME?1:n;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if("truecolor"===i.COLORTERM)return 3;if("TERM_PROGRAM"in i){const e=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:n}return o("no-color")||o("no-colors")||o("color=false")||o("color=never")?a=0:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(a=1),"FORCE_COLOR"in i&&(a="true"===i.FORCE_COLOR?1:"false"===i.FORCE_COLOR?0:0===i.FORCE_COLOR.length?1:Math.min(parseInt(i.FORCE_COLOR,10),3)),m={supportsColor:function(e){return s(c(e,e&&e.isTTY))},stdout:s(c(!0,n.isatty(1))),stderr:s(c(!0,n.isatty(2)))}}();t&&(t.stderr||t).level>=2&&(o.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}o.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),n.exports=d()(o);const{formatters:s}=n.exports;s.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)}}(_,_.exports)),_.exports}var C=i((w||(w=1,"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?p.exports=(l||(l=1,function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=d()(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(f,f.exports)),f.exports):p.exports=O()),p.exports));class E extends Error{constructor(e=void 0,t="An error occurred in the Strapi SDK. Please check the logs for more information."){super(t),this.cause=e}}class A extends E{constructor(e=void 0,t="Some of the provided values are not valid."){super(e,t)}}class R extends E{constructor(e=void 0,t="Could not initialize the Strapi SDK"){super(e,t)}}class j extends Error{}class P extends j{constructor(e){super(`Could not parse invalid URL: "${e}"`)}}class F extends Error{name="HTTPError";response;request;constructor(e,t){const r=`${e.status?.toString()??""} ${e.statusText??""}`.trim();super(`Request failed with ${r?`status code ${r}`:"an unknown error"}: ${t.method} ${t.url}`),this.response=e,this.request=t}}class T extends F{name="HTTPAuthorizationError"}class x extends F{name="HTTPNotFoundError"}class I extends F{name="HTTPBadRequestError"}class N extends F{name="HTTPInternalServerError"}class U extends F{name="HTTPForbiddenError"}class k extends F{name="HTTPTimeoutError"}const D=C("strapi:auth:provider:api-token");class L extends n{static identifier="api-token";constructor(e){super(e)}get name(){return L.identifier}get _token(){return this._options.token}preflightValidation(){if(D("validating provider configuration"),"string"!=typeof this._token||0===this._token.trim().length)throw D("invalid api token provided: %o (%o)",this._token,typeof this._token),new A(`A valid API token is required when using the api-token auth strategy. Got "${this._token}"`);D("provider configuration validated successfully")}authenticate(){return D("no authentication step is required for the %o auth strategy, skipping",this.name),Promise.resolve()}get headers(){return{Authorization:`Bearer ${this._token}`}}}const M=C("strapi:auth:provider:users-permissions"),$="/auth/local";class B extends n{static identifier="users-permissions";_token=null;constructor(e){super(e)}get name(){return B.identifier}get _credentials(){return{identifier:this._options.identifier,password:this._options.password}}preflightValidation(){if(M("validating provider configuration"),void 0===this._options||null===this._options||"object"!=typeof this._options)throw M("invalid options provided: %s (%s)",this._options,typeof this._options),new A("Missing valid options for initializing the Users & Permissions auth provider.");const{identifier:e,password:t}=this._options;if("string"!=typeof e)throw M("invalid identifier provided: %s (%s)",e,typeof e),new A(`The "identifier" option must be a string, but got "${typeof e}"`);if("string"!=typeof t)throw M("invalid password provided: %s (%s)",t,typeof t),new A(`The "password" option must be a string, but got "${typeof t}"`);M("provider configuration validated successfully")}get headers(){return null===this._token?{}:{Authorization:`Bearer ${this._token}`}}async authenticate(e){const{identifier:t,password:r}=this._credentials;M("trying to authenticate with %o as %o at %o ",this.name,t,$);const n=await e.post($,JSON.stringify({identifier:t,password:r}),{headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(n.statusText);const o=await n.json(),i=o.jwt.slice(0,5)+"..."+o.jwt.slice(-5);M("authentication successful for %o (%o)",t,i),this._token=o.jwt}}const q=C("strapi:auth:factory");class H{_registry=new Map;create(e,t){const r=this._registry.get(e);if(!r)throw q("the %o auth strategy is not registered, skipping",e),new E(`Auth strategy "${e}" is not supported.`);const n=r(t);return q("successfully instantiated a new %o provider",e),n}register(e,t){return this._registry.set(e,t),q("registered a new auth strategy: %o",e),this}}const W=C("strapi:auth:manager");class z{_authProviderFactory;_authProvider;_isAuthenticated=!1;constructor(e=new H){W("initializing a new auth manager"),this._authProviderFactory=e,this.registerDefaultProviders()}get strategy(){return this._authProvider?.name}get isAuthenticated(){return this._isAuthenticated}handleUnauthorizedError(){W("unauthorized error encountered, resetting authentication status"),this._isAuthenticated=!1}setStrategy(e,t){W("setting strategy to %o",e),this._authProvider=this._authProviderFactory.create(e,t)}async authenticate(e){if(void 0===this._authProvider)return W("no auth provider is set, skipping authentication"),void(this._isAuthenticated=!1);try{W("trying to authenticate with %s",this._authProvider.name);const t=e.create(void 0,!1);await this._authProvider.authenticate(t),this._isAuthenticated=!0,W("authentication successful")}catch(e){W(`authentication failed: ${e}`),this._isAuthenticated=!1}}authenticateRequest(e){if(!this._authProvider)return;const{headers:t}=e;if(!(t instanceof Headers))throw new Error(`Invalid request headers, headers must be an instance of Headers but found "${typeof t}"`);for(const[e,r]of Object.entries(this._authProvider.headers))t.set(e,r)}registerDefaultProviders(){W("registering default authentication providers"),this._authProviderFactory.register(L.identifier,(e=>new L(e))).register(B.identifier,(e=>new B(e))),W("default authentication providers registered successfully")}}var V,G,K,Q,J,Z,Y,X,ee,te,re,ne,oe,ie,ae,se,ce,ue,le,pe,fe,ye,de,he,ge,me,be,ve,we,_e,Se,Oe,Ce,Ee,Ae,Re,je,Pe,Fe,Te,xe,Ie,Ne,Ue,ke,De,Le,Me,$e,Be,qe,He,We,ze,Ve,Ge,Ke,Qe,Je,Ze,Ye,Xe,et,tt,rt,nt,ot,it,at,st,ct,ut,lt,pt,ft,yt,dt,ht,gt,mt;function bt(){return G?V:(G=1,V=TypeError)}function vt(){return Q?K:(Q=1,K=t.inspect)}function wt(){if(Z)return J;Z=1;var e="function"==typeof Map&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=e&&t&&"function"==typeof t.get?t.get:null,n=e&&Map.prototype.forEach,i="function"==typeof Set&&Set.prototype,a=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=i&&a&&"function"==typeof a.get?a.get:null,c=i&&Set.prototype.forEach,u="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,l="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,y=Object.prototype.toString,d=Function.prototype.toString,h=String.prototype.match,g=String.prototype.slice,m=String.prototype.replace,b=String.prototype.toUpperCase,v=String.prototype.toLowerCase,w=RegExp.prototype.test,_=Array.prototype.concat,S=Array.prototype.join,O=Array.prototype.slice,C=Math.floor,E="function"==typeof BigInt?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,j="function"==typeof Symbol&&"object"==typeof Symbol.iterator,P="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===j||"symbol")?Symbol.toStringTag:null,F=Object.prototype.propertyIsEnumerable,T=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function x(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||w.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-C(-e):C(e);if(n!==e){var o=String(n),i=g.call(t,o.length+1);return m.call(o,r,"$&_")+"."+m.call(m.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return m.call(t,r,"$&_")}var I=vt(),N=I.custom,U=q(N)?N:null,k={__proto__:null,double:'"',single:"'"},D={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function L(e,t,r){var n=r.quoteStyle||t,o=k[n];return o+e+o}function M(e){return m.call(String(e),/"/g,"&quot;")}function $(e){return!("[object Array]"!==z(e)||P&&"object"==typeof e&&P in e)}function B(e){return!("[object RegExp]"!==z(e)||P&&"object"==typeof e&&P in e)}function q(e){if(j)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!R)return!1;try{return R.call(e),!0}catch(e){}return!1}J=function e(t,i,a,y){var b=i||{};if(W(b,"quoteStyle")&&!W(k,b.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(W(b,"maxStringLength")&&("number"==typeof b.maxStringLength?b.maxStringLength<0&&b.maxStringLength!==1/0:null!==b.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var w=!W(b,"customInspect")||b.customInspect;if("boolean"!=typeof w&&"symbol"!==w)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(W(b,"indent")&&null!==b.indent&&"\t"!==b.indent&&!(parseInt(b.indent,10)===b.indent&&b.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(W(b,"numericSeparator")&&"boolean"!=typeof b.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var C=b.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return G(t,b);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var A=String(t);return C?x(t,A):A}if("bigint"==typeof t){var N=String(t)+"n";return C?x(t,N):N}var D=void 0===b.depth?5:b.depth;if(void 0===a&&(a=0),a>=D&&D>0&&"object"==typeof t)return $(t)?"[Array]":"[Object]";var H=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=S.call(Array(e.indent+1)," ")}return{base:r,prev:S.call(Array(t+1),r)}}(b,a);if(void 0===y)y=[];else if(V(y,t)>=0)return"[Circular]";function K(t,r,n){if(r&&(y=O.call(y)).push(r),n){var o={depth:b.depth};return W(b,"quoteStyle")&&(o.quoteStyle=b.quoteStyle),e(t,o,a+1,y)}return e(t,b,a+1,y)}if("function"==typeof t&&!B(t)){var J=function(e){if(e.name)return e.name;var t=h.call(d.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),Z=te(t,K);return"[Function"+(J?": "+J:" (anonymous)")+"]"+(Z.length>0?" { "+S.call(Z,", ")+" }":"")}if(q(t)){var re=j?m.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):R.call(t);return"object"!=typeof t||j?re:Q(re)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var ne="<"+v.call(String(t.nodeName)),oe=t.attributes||[],ie=0;ie<oe.length;ie++)ne+=" "+oe[ie].name+"="+L(M(oe[ie].value),"double",b);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+="</"+v.call(String(t.nodeName))+">"}if($(t)){if(0===t.length)return"[]";var ae=te(t,K);return H&&!function(e){for(var t=0;t<e.length;t++)if(V(e[t],"\n")>=0)return!1;return!0}(ae)?"["+ee(ae,H)+"]":"[ "+S.call(ae,", ")+" ]"}if(function(e){return!("[object Error]"!==z(e)||P&&"object"==typeof e&&P in e)}(t)){var se=te(t,K);return"cause"in Error.prototype||!("cause"in t)||F.call(t,"cause")?0===se.length?"["+String(t)+"]":"{ ["+String(t)+"] "+S.call(se,", ")+" }":"{ ["+String(t)+"] "+S.call(_.call("[cause]: "+K(t.cause),se),", ")+" }"}if("object"==typeof t&&w){if(U&&"function"==typeof t[U]&&I)return I(t,{depth:D-a});if("symbol"!==w&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!r||!e||"object"!=typeof e)return!1;try{r.call(e);try{s.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ce=[];return n&&n.call(t,(function(e,r){ce.push(K(r,t,!0)+" => "+K(e,t))})),X("Map",r.call(t),ce,H)}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{r.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ue=[];return c&&c.call(t,(function(e){ue.push(K(e,t))})),X("Set",s.call(t),ue,H)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e,u);try{l.call(e,l)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Y("WeakMap");if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e,l);try{u.call(e,u)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Y("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return Y("WeakRef");if(function(e){return!("[object Number]"!==z(e)||P&&"object"==typeof e&&P in e)}(t))return Q(K(Number(t)));if(function(e){if(!e||"object"!=typeof e||!E)return!1;try{return E.call(e),!0}catch(e){}return!1}(t))return Q(K(E.call(t)));if(function(e){return!("[object Boolean]"!==z(e)||P&&"object"==typeof e&&P in e)}(t))return Q(f.call(t));if(function(e){return!("[object String]"!==z(e)||P&&"object"==typeof e&&P in e)}(t))return Q(K(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||void 0!==o&&t===o)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==z(e)||P&&"object"==typeof e&&P in e)}(t)&&!B(t)){var le=te(t,K),pe=T?T(t)===Object.prototype:t instanceof Object||t.constructor===Object,fe=t instanceof Object?"":"null prototype",ye=!pe&&P&&Object(t)===t&&P in t?g.call(z(t),8,-1):fe?"Object":"",de=(pe||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ye||fe?"["+S.call(_.call([],ye||[],fe||[]),": ")+"] ":"");return 0===le.length?de+"{}":H?de+"{"+ee(le,H)+"}":de+"{ "+S.call(le,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function W(e,t){return H.call(e,t)}function z(e){return y.call(e)}function V(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function G(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return G(g.call(e,0,t.maxStringLength),t)+n}var o=D[t.quoteStyle||"single"];return o.lastIndex=0,L(m.call(m.call(e,o,"\\$1"),/[\x00-\x1f]/g,K),"single",t)}function K(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function Q(e){return"Object("+e+")"}function Y(e){return e+" { ? }"}function X(e,t,r,n){return e+" ("+t+") {"+(n?ee(r,n):S.call(r,", "))+"}"}function ee(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+S.call(e,","+r)+"\n"+t.prev}function te(e,t){var r=$(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=W(e,o)?t(e[o],e):""}var i,a="function"==typeof A?A(e):[];if(j){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var c in e)W(e,c)&&(r&&String(Number(c))===c&&c<e.length||j&&i["$"+c]instanceof Symbol||(w.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if("function"==typeof A)for(var u=0;u<a.length;u++)F.call(e,a[u])&&n.push("["+t(a[u])+"]: "+t(e[a[u]],e));return n}return J}function _t(){if(X)return Y;X=1;var e=wt(),t=bt(),r=function(e,t,r){for(var n,o=e;null!=(n=o.next);o=n)if(n.key===t)return o.next=n.next,r||(n.next=e.next,e.next=n),n};return Y=function(){var n,o={assert:function(r){if(!o.has(r))throw new t("Side channel does not contain "+e(r))},delete:function(e){var t=n&&n.next,o=function(e,t){if(e)return r(e,t,!0)}(n,e);return o&&t&&t===o&&(n=void 0),!!o},get:function(e){return function(e,t){if(e){var n=r(e,t);return n&&n.value}}(n,e)},has:function(e){return function(e,t){return!!e&&!!r(e,t)}(n,e)},set:function(e,t){n||(n={next:void 0}),function(e,t,n){var o=r(e,t);o?o.value=n:e.next={key:t,next:e.next,value:n}}(n,e,t)}};return o},Y}function St(){return te?ee:(te=1,ee=Object)}function Ot(){return ne?re:(ne=1,re=Error)}function Ct(){return ie?oe:(ie=1,oe=EvalError)}function Et(){return se?ae:(se=1,ae=RangeError)}function At(){return ue?ce:(ue=1,ce=ReferenceError)}function Rt(){return pe?le:(pe=1,le=SyntaxError)}function jt(){return ye?fe:(ye=1,fe=URIError)}function Pt(){return he?de:(he=1,de=Math.abs)}function Ft(){return me?ge:(me=1,ge=Math.floor)}function Tt(){return ve?be:(ve=1,be=Math.max)}function xt(){return _e?we:(_e=1,we=Math.min)}function It(){return Oe?Se:(Oe=1,Se=Math.pow)}function Nt(){return Ee?Ce:(Ee=1,Ce=Object.getOwnPropertyDescriptor)}function Ut(){if(Re)return Ae;Re=1;var e=Nt();if(e)try{e([],"length")}catch(t){e=null}return Ae=e}function kt(){if(Pe)return je;Pe=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}return je=e}function Dt(){if(Ie)return xe;Ie=1;var e="undefined"!=typeof Symbol&&Symbol,t=Te?Fe:(Te=1,Fe=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0});return xe=function(){return"function"==typeof e&&("function"==typeof Symbol&&("symbol"==typeof e("foo")&&("symbol"==typeof Symbol("bar")&&t())))}}function Lt(){if(Ue)return Ne;Ue=1;var e=Object.prototype.toString,t=Math.max,r=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};return Ne=function(n){var o=this;if("function"!=typeof o||"[object Function]"!==e.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(e,t){for(var r=[],n=t,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r}(arguments,1),s=t(0,o.length-a.length),c=[],u=0;u<s;u++)c[u]="$"+u;if(i=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(c,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var e=o.apply(this,r(a,arguments));return Object(e)===e?e:this}return o.apply(n,r(a,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i},Ne}function Mt(){if(De)return ke;De=1;var e=Lt();return ke=Function.prototype.bind||e}function $t(){return Me?Le:(Me=1,Le=Function.prototype.call)}function Bt(){return Be?$e:(Be=1,$e=Function.prototype.apply)}function qt(){if(ze)return We;ze=1;var e=Mt(),t=Bt(),r=$t(),n=He?qe:(He=1,qe="undefined"!=typeof Reflect&&Reflect&&Reflect.apply);return We=n||e.call(r,t)}function Ht(){if(Ge)return Ve;Ge=1;var e=Mt(),t=bt(),r=$t(),n=qt();return Ve=function(o){if(o.length<1||"function"!=typeof o[0])throw new t("a function is required");return n(e,r,o)}}function Wt(){if(Qe)return Ke;Qe=1;var e,t=Ht(),r=Ut();try{e=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var n=!!e&&r&&r(Object.prototype,"__proto__"),o=Object,i=o.getPrototypeOf;return Ke=n&&"function"==typeof n.get?t([n.get]):"function"==typeof i&&function(e){return i(null==e?e:o(e))}}function zt(){if(Ze)return Je;Ze=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Mt();return Je=r.call(e,t)}function Vt(){if(Xe)return Ye;var e;Xe=1;var t=St(),r=Ot(),n=Ct(),o=Et(),i=At(),a=Rt(),s=bt(),c=jt(),u=Pt(),l=Ft(),p=Tt(),f=xt(),y=It(),d=Function,h=function(e){try{return d('"use strict"; return ('+e+").constructor;")()}catch(e){}},g=Ut(),m=kt(),b=function(){throw new s},v=g?function(){try{return b}catch(e){try{return g(arguments,"callee").get}catch(e){return b}}}():b,w=Dt()(),_=Wt(),S="function"==typeof Reflect&&Reflect.getPrototypeOf||t.getPrototypeOf||_,O=Bt(),C=$t(),E={},A="undefined"!=typeof Uint8Array&&S?S(Uint8Array):e,R={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?e:ArrayBuffer,"%ArrayIteratorPrototype%":w&&S?S([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":E,"%AsyncGenerator%":E,"%AsyncGeneratorFunction%":E,"%AsyncIteratorPrototype%":E,"%Atomics%":"undefined"==typeof Atomics?e:Atomics,"%BigInt%":"undefined"==typeof BigInt?e:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?e:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float32Array%":"undefined"==typeof Float32Array?e:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?e:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?e:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":E,"%Int8Array%":"undefined"==typeof Int8Array?e:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?e:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":w&&S?S(S([][Symbol.iterator]())):e,"%JSON%":"object"==typeof JSON?JSON:e,"%Map%":"undefined"==typeof Map?e:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&w&&S?S((new Map)[Symbol.iterator]()):e,"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":g,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?e:Promise,"%Proxy%":"undefined"==typeof Proxy?e:Proxy,"%RangeError%":o,"%ReferenceError%":i,"%Reflect%":"undefined"==typeof Reflect?e:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?e:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&w&&S?S((new Set)[Symbol.iterator]()):e,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":w&&S?S(""[Symbol.iterator]()):e,"%Symbol%":w?Symbol:e,"%SyntaxError%":a,"%ThrowTypeError%":v,"%TypedArray%":A,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?e:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?e:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?e:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?e:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"==typeof WeakMap?e:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?e:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?e:WeakSet,"%Function.prototype.call%":C,"%Function.prototype.apply%":O,"%Object.defineProperty%":m,"%Math.abs%":u,"%Math.floor%":l,"%Math.max%":p,"%Math.min%":f,"%Math.pow%":y};if(S)try{null.error}catch(e){var j=S(S(e));R["%Error.prototype%"]=j}var P=function e(t){var r;if("%AsyncFunction%"===t)r=h("async function () {}");else if("%GeneratorFunction%"===t)r=h("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=h("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&S&&(r=S(o.prototype))}return R[t]=r,r},F={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=Mt(),x=zt(),I=T.call(C,Array.prototype.concat),N=T.call(O,Array.prototype.splice),U=T.call(C,String.prototype.replace),k=T.call(C,String.prototype.slice),D=T.call(C,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,$=function(e,t){var r,n=e;if(x(F,n)&&(n="%"+(r=F[n])[0]+"%"),x(R,n)){var o=R[n];if(o===E&&(o=P(n)),void 0===o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new a("intrinsic "+e+" does not exist!")};return Ye=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===D(/^%?[^%]*%?$/,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=k(e,0,1),r=k(e,-1);if("%"===t&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var n=[];return U(e,L,(function(e,t,r,o){n[n.length]=r?U(o,M,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=$("%"+n+"%",t),i=o.name,c=o.value,u=!1,l=o.alias;l&&(n=l[0],N(r,I([0,1],l)));for(var p=1,f=!0;p<r.length;p+=1){var y=r[p],d=k(y,0,1),h=k(y,-1);if(('"'===d||"'"===d||"`"===d||'"'===h||"'"===h||"`"===h)&&d!==h)throw new a("property names with quotes must have matching quotes");if("constructor"!==y&&f||(u=!0),x(R,i="%"+(n+="."+y)+"%"))c=R[i];else if(null!=c){if(!(y in c)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(g&&p+1>=r.length){var m=g(c,y);c=(f=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:c[y]}else f=x(c,y),c=c[y];f&&!u&&(R[i]=c)}}return c},Ye}function Gt(){if(tt)return et;tt=1;var e=Vt(),t=Ht(),r=t([e("%String.prototype.indexOf%")]);return et=function(n,o){var i=e(n,!!o);return"function"==typeof i&&r(n,".prototype.")>-1?t([i]):i}}function Kt(){if(nt)return rt;nt=1;var e=Vt(),t=Gt(),r=wt(),n=bt(),o=e("%Map%",!0),i=t("Map.prototype.get",!0),a=t("Map.prototype.set",!0),s=t("Map.prototype.has",!0),c=t("Map.prototype.delete",!0),u=t("Map.prototype.size",!0);return rt=!!o&&function(){var e,t={assert:function(e){if(!t.has(e))throw new n("Side channel does not contain "+r(e))},delete:function(t){if(e){var r=c(e,t);return 0===u(e)&&(e=void 0),r}return!1},get:function(t){if(e)return i(e,t)},has:function(t){return!!e&&s(e,t)},set:function(t,r){e||(e=new o),a(e,t,r)}};return t}}function Qt(){if(st)return at;st=1;var e=bt(),t=wt(),r=_t(),n=Kt(),o=function(){if(it)return ot;it=1;var e=Vt(),t=Gt(),r=wt(),n=Kt(),o=bt(),i=e("%WeakMap%",!0),a=t("WeakMap.prototype.get",!0),s=t("WeakMap.prototype.set",!0),c=t("WeakMap.prototype.has",!0),u=t("WeakMap.prototype.delete",!0);return ot=i?function(){var e,t,l={assert:function(e){if(!l.has(e))throw new o("Side channel does not contain "+r(e))},delete:function(r){if(i&&r&&("object"==typeof r||"function"==typeof r)){if(e)return u(e,r)}else if(n&&t)return t.delete(r);return!1},get:function(r){return i&&r&&("object"==typeof r||"function"==typeof r)&&e?a(e,r):t&&t.get(r)},has:function(r){return i&&r&&("object"==typeof r||"function"==typeof r)&&e?c(e,r):!!t&&t.has(r)},set:function(r,o){i&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new i),s(e,r,o)):n&&(t||(t=n()),t.set(r,o))}};return l}:n}(),i=o||n||r;return at=function(){var r,n={assert:function(r){if(!n.has(r))throw new e("Side channel does not contain "+t(r))},delete:function(e){return!!r&&r.delete(e)},get:function(e){return r&&r.get(e)},has:function(e){return!!r&&r.has(e)},set:function(e,t){r||(r=i()),r.set(e,t)}};return n}}function Jt(){if(ut)return ct;ut=1;var e=String.prototype.replace,t=/%20/g,r="RFC3986";return ct={default:r,formatters:{RFC1738:function(r){return e.call(r,t,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:r}}function Zt(){if(pt)return lt;pt=1;var e=Jt(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},i=1024;return lt={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var i=t[o],a=i.obj[i.prop],s=Object.keys(a),c=0;c<s.length;++c){var u=s[c],l=a[u];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:a,prop:u}),n.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(r(n)){for(var o=[],i=0;i<n.length;++i)void 0!==n[i]&&o.push(n[i]);t.obj[t.prop]=o}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(t,r,o,a,s){if(0===t.length)return t;var c=t;if("symbol"==typeof t?c=Symbol.prototype.toString.call(t):"string"!=typeof t&&(c=String(t)),"iso-8859-1"===o)return escape(c).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var u="",l=0;l<c.length;l+=i){for(var p=c.length>=i?c.slice(l,l+i):c,f=[],y=0;y<p.length;++y){var d=p.charCodeAt(y);45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===e.RFC1738&&(40===d||41===d)?f[f.length]=p.charAt(y):d<128?f[f.length]=n[d]:d<2048?f[f.length]=n[192|d>>6]+n[128|63&d]:d<55296||d>=57344?f[f.length]=n[224|d>>12]+n[128|d>>6&63]+n[128|63&d]:(y+=1,d=65536+((1023&d)<<10|1023&p.charCodeAt(y)),f[f.length]=n[240|d>>18]+n[128|d>>12&63]+n[128|d>>6&63]+n[128|63&d])}u+=f.join("")}return u},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(r(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(t(e[o]));return n}return t(e)},merge:function e(n,i,a){if(!i)return n;if("object"!=typeof i&&"function"!=typeof i){if(r(n))n.push(i);else{if(!n||"object"!=typeof n)return[n,i];(a&&(a.plainObjects||a.allowPrototypes)||!t.call(Object.prototype,i))&&(n[i]=!0)}return n}if(!n||"object"!=typeof n)return[n].concat(i);var s=n;return r(n)&&!r(i)&&(s=o(n,a)),r(n)&&r(i)?(i.forEach((function(r,o){if(t.call(n,o)){var i=n[o];i&&"object"==typeof i&&r&&"object"==typeof r?n[o]=e(i,r,a):n.push(r)}else n[o]=r})),n):Object.keys(i).reduce((function(r,n){var o=i[n];return t.call(r,n)?r[n]=e(r[n],o,a):r[n]=o,r}),s)}},lt}function Yt(){if(yt)return ft;yt=1;var e=Qt(),t=Zt(),r=Jt(),n=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Array.isArray,a=Array.prototype.push,s=function(e,t){a.apply(e,i(t)?t:[t])},c=Date.prototype.toISOString,u=r.default,l={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:u,formatter:r.formatters[u],indices:!1,serializeDate:function(e){return c.call(e)},skipNulls:!1,strictNullHandling:!1},p={},f=function r(n,o,a,c,u,f,y,d,h,g,m,b,v,w,_,S,O,C){for(var E,A=n,R=C,j=0,P=!1;void 0!==(R=R.get(p))&&!P;){var F=R.get(n);if(j+=1,void 0!==F){if(F===j)throw new RangeError("Cyclic object value");P=!0}void 0===R.get(p)&&(j=0)}if("function"==typeof g?A=g(o,A):A instanceof Date?A=v(A):"comma"===a&&i(A)&&(A=t.maybeMap(A,(function(e){return e instanceof Date?v(e):e}))),null===A){if(f)return h&&!S?h(o,l.encoder,O,"key",w):o;A=""}if("string"==typeof(E=A)||"number"==typeof E||"boolean"==typeof E||"symbol"==typeof E||"bigint"==typeof E||t.isBuffer(A))return h?[_(S?o:h(o,l.encoder,O,"key",w))+"="+_(h(A,l.encoder,O,"value",w))]:[_(o)+"="+_(String(A))];var T,x=[];if(void 0===A)return x;if("comma"===a&&i(A))S&&h&&(A=t.maybeMap(A,h)),T=[{value:A.length>0?A.join(",")||null:void 0}];else if(i(g))T=g;else{var I=Object.keys(A);T=m?I.sort(m):I}var N=d?String(o).replace(/\./g,"%2E"):String(o),U=c&&i(A)&&1===A.length?N+"[]":N;if(u&&i(A)&&0===A.length)return U+"[]";for(var k=0;k<T.length;++k){var D=T[k],L="object"==typeof D&&D&&void 0!==D.value?D.value:A[D];if(!y||null!==L){var M=b&&d?String(D).replace(/\./g,"%2E"):String(D),$=i(A)?"function"==typeof a?a(U,M):U:U+(b?"."+M:"["+M+"]");C.set(n,j);var B=e();B.set(p,C),s(x,r(L,$,a,c,u,f,y,d,"comma"===a&&S&&i(A)?null:h,g,m,b,v,w,_,S,O,B))}}return x};return ft=function(t,a){var c,u=t,p=function(e){if(!e)return l;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||l.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var a=r.default;if(void 0!==e.format){if(!n.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");a=e.format}var s,c=r.formatters[a],u=l.filter;if(("function"==typeof e.filter||i(e.filter))&&(u=e.filter),s=e.arrayFormat in o?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":l.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var p=void 0===e.allowDots?!0===e.encodeDotInKeys||l.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:l.addQueryPrefix,allowDots:p,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:l.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:l.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?l.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:l.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:l.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:l.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:l.encodeValuesOnly,filter:u,format:a,formatter:c,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:l.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:l.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:l.strictNullHandling}}(a);"function"==typeof p.filter?u=(0,p.filter)("",u):i(p.filter)&&(c=p.filter);var y=[];if("object"!=typeof u||null===u)return"";var d=o[p.arrayFormat],h="comma"===d&&p.commaRoundTrip;c||(c=Object.keys(u)),p.sort&&c.sort(p.sort);for(var g=e(),m=0;m<c.length;++m){var b=c[m],v=u[b];p.skipNulls&&null===v||s(y,f(v,b,d,h,p.allowEmptyArrays,p.strictNullHandling,p.skipNulls,p.encodeDotInKeys,p.encode?p.encoder:null,p.filter,p.sort,p.allowDots,p.serializeDate,p.format,p.formatter,p.encodeValuesOnly,p.charset,g))}var w=y.join(p.delimiter),_=!0===p.addQueryPrefix?"?":"";return p.charsetSentinel&&("iso-8859-1"===p.charset?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),w.length>0?_+w:""},ft}function Xt(){if(ht)return dt;ht=1;var e=Zt(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:e.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},o=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},i=function(e,t,r){if(e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&r>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(1===t.arrayLimit?"":"s")+" allowed in an array.");return e},a=function(r,n,o,a){if(r){var s=o.allowDots?r.replace(/\.([^.[]+)/g,"[$1]"):r,c=/(\[[^[\]]*])/g,u=o.depth>0&&/(\[[^[\]]*])/.exec(s),l=u?s.slice(0,u.index):s,p=[];if(l){if(!o.plainObjects&&t.call(Object.prototype,l)&&!o.allowPrototypes)return;p.push(l)}for(var f=0;o.depth>0&&null!==(u=c.exec(s))&&f<o.depth;){if(f+=1,!o.plainObjects&&t.call(Object.prototype,u[1].slice(1,-1))&&!o.allowPrototypes)return;p.push(u[1])}if(u){if(!0===o.strictDepth)throw new RangeError("Input depth exceeded depth option of "+o.depth+" and strictDepth is true");p.push("["+s.slice(u.index)+"]")}return function(t,r,n,o){var a=0;if(t.length>0&&"[]"===t[t.length-1]){var s=t.slice(0,-1).join("");a=Array.isArray(r)&&r[s]?r[s].length:0}for(var c=o?r:i(r,n,a),u=t.length-1;u>=0;--u){var l,p=t[u];if("[]"===p&&n.parseArrays)l=n.allowEmptyArrays&&(""===c||n.strictNullHandling&&null===c)?[]:e.combine([],c);else{l=n.plainObjects?{__proto__:null}:{};var f="["===p.charAt(0)&&"]"===p.charAt(p.length-1)?p.slice(1,-1):p,y=n.decodeDotInKeys?f.replace(/%2E/g,"."):f,d=parseInt(y,10);n.parseArrays||""!==y?!isNaN(d)&&p!==y&&String(d)===y&&d>=0&&n.parseArrays&&d<=n.arrayLimit?(l=[])[d]=c:"__proto__"!==y&&(l[y]=c):l={0:c}}c=l}return c}(p,n,o,a)}};return dt=function(s,c){var u=function(t){if(!t)return n;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.decodeDotInKeys&&"boolean"!=typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==t.throwOnLimitExceeded&&"boolean"!=typeof t.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=void 0===t.charset?n.charset:t.charset,o=void 0===t.duplicates?n.duplicates:t.duplicates;if("combine"!==o&&"first"!==o&&"last"!==o)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===t.allowDots?!0===t.decodeDotInKeys||n.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:n.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:n.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:n.arrayLimit,charset:r,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:n.comma,decodeDotInKeys:"boolean"==typeof t.decodeDotInKeys?t.decodeDotInKeys:n.decodeDotInKeys,decoder:"function"==typeof t.decoder?t.decoder:n.decoder,delimiter:"string"==typeof t.delimiter||e.isRegExp(t.delimiter)?t.delimiter:n.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:n.depth,duplicates:o,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:n.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:n.plainObjects,strictDepth:"boolean"==typeof t.strictDepth?!!t.strictDepth:n.strictDepth,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof t.throwOnLimitExceeded&&t.throwOnLimitExceeded}}(c);if(""===s||null==s)return u.plainObjects?{__proto__:null}:{};for(var l="string"==typeof s?function(a,s){var c={__proto__:null},u=s.ignoreQueryPrefix?a.replace(/^\?/,""):a;u=u.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var l=s.parameterLimit===1/0?void 0:s.parameterLimit,p=u.split(s.delimiter,s.throwOnLimitExceeded?l+1:l);if(s.throwOnLimitExceeded&&p.length>l)throw new RangeError("Parameter limit exceeded. Only "+l+" parameter"+(1===l?"":"s")+" allowed.");var f,y=-1,d=s.charset;if(s.charsetSentinel)for(f=0;f<p.length;++f)0===p[f].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[f]?d="utf-8":"utf8=%26%2310003%3B"===p[f]&&(d="iso-8859-1"),y=f,f=p.length);for(f=0;f<p.length;++f)if(f!==y){var h,g,m=p[f],b=m.indexOf("]="),v=-1===b?m.indexOf("="):b+1;-1===v?(h=s.decoder(m,n.decoder,d,"key"),g=s.strictNullHandling?null:""):(h=s.decoder(m.slice(0,v),n.decoder,d,"key"),g=e.maybeMap(i(m.slice(v+1),s,r(c[h])?c[h].length:0),(function(e){return s.decoder(e,n.decoder,d,"value")}))),g&&s.interpretNumericEntities&&"iso-8859-1"===d&&(g=o(String(g))),m.indexOf("[]=")>-1&&(g=r(g)?[g]:g);var w=t.call(c,h);w&&"combine"===s.duplicates?c[h]=e.combine(c[h],g):w&&"last"!==s.duplicates||(c[h]=g)}return c}(s,u):s,p=u.plainObjects?{__proto__:null}:{},f=Object.keys(l),y=0;y<f.length;++y){var d=f[y],h=a(d,l[d],u,"string"==typeof s);p=e.merge(p,h,u)}return!0===u.allowSparse?p:e.compact(p)}}function er(){if(mt)return gt;mt=1;var e=Yt(),t=Xt();return gt={formats:Jt(),parse:t,stringify:e}}var tr=i(er());const rr=C("strapi:utils:url-helper");class nr{static appendQueryParams(e,t){if(rr("appending query params to %o: %o",e,t),!t)return rr("no query params provided, returning original URL: %o",e),e;const r=nr.stringifyQueryParams(t);return r?URL.canParse(e)&&new URL(e).search?`${e}&${r}`:`${e}?${r}`:(rr("generated an empty query string, skipping..."),e)}static stringifyQueryParams(e){return tr.stringify(e,{addQueryPrefix:!1,allowEmptyArrays:!0})}static toReadablePath(e){const t=e instanceof URL?e:new URL(e);return`${t.origin}${t.pathname}`}}class or{static format(e){if(!(e instanceof Request))throw new TypeError("Invalid input, expected a Request instance but found "+typeof e);return`${e.method} - ${nr.toReadablePath(e.url)}`}}const ir=C("strapi:ct:single");class ar{_singularName;_httpClient;constructor(e,t){this._singularName=e,this._httpClient=t,ir("initialized manager for %o",e)}async find(e){ir("finding document for %o",this._singularName);let t=`/${this._singularName}`;e&&(t=nr.appendQueryParams(t,e));const r=await this._httpClient.get(t);return ir("the %o document has been fetched",this._singularName),r.json()}async update(e,t){ir("updating document for %o",this._singularName);let r=`/${this._singularName}`;t&&(r=nr.appendQueryParams(r,t));const n=await this._httpClient.put(r,JSON.stringify({data:e}),{headers:{"Content-Type":"application/json"}});return ir("the %o document has been updated",this._singularName),n.json()}async delete(e){ir("deleting document for %o",this._singularName);let t=`/${this._singularName}`;e&&(t=nr.appendQueryParams(t,e)),await this._httpClient.delete(t),ir("the %o document has been deleted",this._singularName)}}const sr=C("strapi:ct:collection");class cr{_pluralName;_httpClient;constructor(e,t){this._pluralName=e,this._httpClient=t,sr("initialized manager for %o",e)}async find(e){sr("finding documents for %o",this._pluralName);let t=`/${this._pluralName}`;e&&(t=nr.appendQueryParams(t,e));const r=await this._httpClient.get(t),n=await r.json();return sr("found %o %o documents",Number(n?.data?.length),this._pluralName),n}async findOne(e,t){sr("finding a document for %o with id: %o",this._pluralName,e);let r=`/${this._pluralName}/${e}`;t&&(r=nr.appendQueryParams(r,t));const n=await this._httpClient.get(r);return sr("found the %o document with document id %o",this._pluralName,e),n.json()}async create(e,t){sr("creating a document for %o",this._pluralName);let r=`/${this._pluralName}`;t&&(r=nr.appendQueryParams(r,t));const n=await this._httpClient.post(r,JSON.stringify({data:e}),{headers:{"Content-Type":"application/json"}});return sr("created the %o document",this._pluralName),n.json()}async update(e,t,r){sr("updating a document for %o with id: %o",this._pluralName,e);let n=`/${this._pluralName}/${e}`;r&&(n=nr.appendQueryParams(n,r));const o=await this._httpClient.put(n,JSON.stringify({data:t}),{headers:{"Content-Type":"application/json"}});return sr("updated the %o document with id %o",this._pluralName,e),o.json()}async delete(e,t){sr("deleting a document for %o with id: %o",this._pluralName,e);let r=`/${this._pluralName}/${e}`;t&&(r=nr.appendQueryParams(r,t)),await this._httpClient.delete(r),sr("deleted the %o document with id %o",this._pluralName,e)}}const ur={trailingSlashes:!1,leadingSlashes:!1};class lr{static format(e,t=ur){return e=lr.formatTrailingSlashes(e,t.trailingSlashes),e=lr.formatLeadingSlashes(e,t.leadingSlashes)}static formatTrailingSlashes(e,t=ur.trailingSlashes){return"single"===t?lr.ensureSingleTrailingSlash(e):t?e:lr.removeTrailingSlashes(e)}static removeTrailingSlashes(e){return e.replace(/\/+$/,"")}static ensureSingleTrailingSlash(e){return`${this.removeTrailingSlashes(e)}/`}static formatLeadingSlashes(e,t=ur.leadingSlashes){return"single"===t?lr.ensureSingleLeadingSlash(e):t?e:lr.removeLeadingSlashes(e)}static removeLeadingSlashes(e){return e.replace(/^\/+/,"")}static ensureSingleLeadingSlash(e){return`/${this.removeLeadingSlashes(e)}`}}const pr=C("strapi:validators:url");class fr{validate(e){if("string"!=typeof e)throw pr("url must be a string, received: %o (%s)",e,typeof e),new P(e);if(!this.canParse(e))throw pr("url could not be parsed: %o (%s)",e,typeof e),new P(e);pr("validated url successfully: %o",e)}canParse(e){return URL.canParse(e)}}const yr=C("strapi:validators:config");class dr{_urlValidator;constructor(e=new fr){this._urlValidator=e}validateConfig(e){if(yr("validating sdk config"),null==e||Array.isArray(e)||"object"!=typeof e)throw yr("provided sdk configuration is not a valid object: %o (%s)",e,typeof e),new A(new TypeError("The provided configuration is not a valid object."));this.validateBaseURL(e.baseURL),yr("validated sdk config successfully")}validateBaseURL(e){try{yr("validating base url"),this._urlValidator.validate(e)}catch(t){if(t instanceof j)throw yr("failed to validate sdk config, invalid base url %o",e),new A(t);throw t}}}var hr;!function(e){e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.TIMEOUT=408]="TIMEOUT",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR"}(hr||(hr={}));class gr{_handlers;constructor(e=[]){this._handlers=e}use(e,t){return this._handlers.push({fulfilled:e,rejected:t}),this}clone(){return new gr([...this._handlers])}async execute(e){let t=e;for(const e of this._handlers)try{e.fulfilled&&(t=await e.fulfilled(t))}catch(r){if(!e.rejected)throw r;t=await e.rejected(r)}return t}async reject(e){let t=e;for(const e of this._handlers)e.rejected&&(t=await e.rejected(t));return t}}const mr=C("strapi:http");class br{interceptors;_baseURL;_timeout;_headers;_urlValidator;constructor(e,t=new fr){mr("initializing new client with base url: %o",e.baseURL),this._baseURL=lr.format(e.baseURL,{trailingSlashes:!1}),this._timeout=e.timeout??1e4,this._headers=e.headers??{},this.interceptors={request:new gr,response:new gr},this._urlValidator=t,this._urlValidator.validate(this._baseURL)}get baseURL(){return this._baseURL}get timeout(){return this._timeout}get headers(){return this._headers}setBaseURL(e){return this._urlValidator.validate(e),this._baseURL=lr.format(e,{trailingSlashes:!1}),mr("setting new base url: %o",this._baseURL),this}setTimeout(e){if(mr("setting new timeout: %o",e),!Number.isSafeInteger(e))throw new TypeError("Timeout must be a safe integer");return this._timeout=e,this}async request(e,t){const r=lr.format(e,{leadingSlashes:"single"}),n=new URL(`${this.baseURL}${r}`),o=new Request(n,t);for(const[e,t]of Object.entries(this._headers))o.headers.append(e,t),mr("%o header set to %o for %o",e,t,or.format(o));const{request:i}=await this.interceptors.request.execute({request:o}),a=new AbortController,s=setTimeout((()=>a.abort()),this._timeout),c=new Request(i,{signal:a.signal});try{const e=await this.fetch(n,c);clearTimeout(s);const{response:t}=await this.interceptors.response.execute({request:c,response:e});return t}catch(e){throw clearTimeout(s),await this.interceptors.response.reject(e)}}fetch(e,t){return globalThis.fetch(e,t)}async get(e,t){return this.request(e,{method:"GET",...t})}async post(e,t,r){return this.request(e,{method:"POST",body:t,...r})}async put(e,t,r){return this.request(e,{method:"PUT",body:t,...r})}async delete(e,t){return this.request(e,{method:"DELETE",...t})}create(e={},t=!0){const r=new(Object.getPrototypeOf(this).constructor)({baseURL:e.baseURL??this._baseURL,timeout:e.timeout??this._timeout,headers:e.headers??this._headers},this._urlValidator);if(!(r instanceof br))throw new Error("The created instance is not an instance of HttpClient");return t&&(r.interceptors.request=this.interceptors.request.clone(),r.interceptors.response=this.interceptors.response.clone()),r}static mapResponseToHTTPError(e,t){switch(e.status){case hr.BAD_REQUEST:return new I(e,t);case hr.UNAUTHORIZED:return new T(e,t);case hr.FORBIDDEN:return new U(e,t);case hr.NOT_FOUND:return new x(e,t);case hr.TIMEOUT:return new k(e,t);case hr.INTERNAL_SERVER_ERROR:return new N(e,t)}return new F(e,t)}}class vr{static ensurePreAuthentication(e,t){return async({request:r})=>{const{strategy:n,isAuthenticated:o}=e;return n&&!o&&await e.authenticate(t),{request:r}}}static authenticateRequests(e){return({request:t})=>(e.authenticateRequest(t),{request:t})}static notifyOnUnauthorizedResponse(e){const t=()=>e.handleUnauthorizedError();return[({request:e,response:r})=>(!r.ok&&r.status===hr.UNAUTHORIZED&&t(),{request:e,response:r}),e=>(e instanceof T&&t(),e)]}}class wr{static setDefaultHeaders(){const e=new Map([["Content-Type","application/json"]]);return({request:t})=>{for(const[r,n]of e.entries()){t.headers.has(r)||t.headers.set(r,n)}return{request:t}}}static transformErrors(){return({request:e,response:t})=>{if(t.ok)return{request:e,response:t};throw br.mapResponseToHTTPError(t,e)}}}const _r=C("strapi:core");class Sr{_config;_validator;_authManager;_httpClient;constructor(e,t=new dr,r=new z,n){this._config=e,this._validator=t,this._authManager=r,_r("started the initialization process"),this.preflightValidation(),_r("user config passed the preflight validation"),this._httpClient=n?n({baseURL:e.baseURL}):new br({baseURL:e.baseURL}),this.init(),_r("finished the sdk initialization process")}preflightValidation(){try{_r("validating the configuration"),this._validator.validateConfig(this._config)}catch(e){throw new R(e)}}init(){_r("init modules"),this.initHttp(),this.initAuth()}initHttp(){_r("init http module"),this._httpClient.interceptors.request.use(wr.setDefaultHeaders()),this._httpClient.interceptors.response.use(wr.transformErrors())}initAuth(){if(_r("init auth module"),this.auth){const{strategy:e,options:t}=this.auth;_r("setting up the auth strategy using %o",e);try{this._authManager.setStrategy(e,t)}catch(e){throw new R(e,`Failed to initialize the SDK auth manager: ${e instanceof E?e.cause:e}`)}}this._httpClient.interceptors.request.use(vr.ensurePreAuthentication(this._authManager,this._httpClient)).use(vr.authenticateRequests(this._authManager)),this._httpClient.interceptors.response.use(...vr.notifyOnUnauthorizedResponse(this._authManager))}get auth(){return this._config.auth}get baseURL(){return this._config.baseURL}fetch(e,t){return this._httpClient.request(e,t)}collection(e){return new cr(e,this._httpClient)}single(e){return new ar(e,this._httpClient)}}const Or=e=>{const{baseURL:t,auth:r}=e,n={baseURL:t};return void 0!==r&&(n.auth={strategy:L.identifier,options:{token:r}}),new Sr(n)};export{T as HTTPAuthorizationError,I as HTTPBadRequestError,F as HTTPError,U as HTTPForbiddenError,N as HTTPInternalServerError,x as HTTPNotFoundError,k as HTTPTimeoutError,E as StrapiError,R as StrapiInitializationError,A as StrapiValidationError,P as URLParsingError,j as URLValidationError,Or as strapi};
